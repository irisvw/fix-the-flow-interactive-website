const artObjectsList = {
  "data": [
    {
      "image": "assets/pottery1.jpg",
      "displayDate": null,
      "productionCulturalGroup": null,
      "site": null,
      "recordType": null,
      "objectName": null,
      "slug": "space",
      "objectNumber": null,
      "title": "Space",
      "location": null,
      "styles": null,
      "artist": null,
      "museum": null,
      "sort": null,
      "id": 27,
      "materials": [],
      "techniques": "Pottery"
    },
    {
      "image": "assets/islamic1.jpg",
      "displayDate": null,
      "productionCulturalGroup": null,
      "site": null,
      "recordType": null,
      "objectName": null,
      "slug": "art",
      "objectNumber": null,
      "title": "Art",
      "location": null,
      "styles": null,
      "artist": null,
      "museum": null,
      "sort": null,
      "id": 28,
      "materials": [],
      "techniques": "Islamic Art"
    },
    {
      "image": "assets/tapestry1.jpg",
      "displayDate": null,
      "productionCulturalGroup": null,
      "site": null,
      "recordType": null,
      "objectName": null,
      "slug": "marie-bonaparte-s-tiara",
      "objectNumber": null,
      "title": "Marie Bonaparte’s Tiara",
      "location": null,
      "styles": null,
      "artist": null,
      "museum": null,
      "sort": null,
      "id": 1,
      "materials": [],
      "techniques": "Tapestry"
    },
    {
      "image": "assets/glass1.jpg",
      "displayDate": null,
      "productionCulturalGroup": null,
      "site": null,
      "recordType": null,
      "objectName": null,
      "slug": "sample-of-iraqi-soil-excavation-5-layers-of-death",
      "objectNumber": null,
      "title": "Sample of Iraqi Soil Excavation = 5 Layers of Death",
      "location": null,
      "styles": null,
      "artist": null,
      "museum": null,
      "sort": null,
      "id": 2,
      "materials": [],
      "techniques": "Glass"
    },
    {
      "image": "assets/pottery1.jpg",
      "displayDate": null,
      "productionCulturalGroup": null,
      "site": null,
      "recordType": null,
      "objectName": null,
      "slug": "architectural-wall-decoration",
      "objectNumber": null,
      "title": "Architectural Wall Decoration",
      "location": null,
      "styles": null,
      "artist": null,
      "museum": null,
      "sort": null,
      "id": 3,
      "materials": [],
      "techniques": "Pottery"
    },
    {
      "image": "assets/islamic2.jpg",
      "displayDate": null,
      "productionCulturalGroup": null,
      "site": null,
      "recordType": null,
      "objectName": null,
      "slug": "composition",
      "objectNumber": null,
      "title": "Composition",
      "location": null,
      "styles": null,
      "artist": null,
      "museum": null,
      "sort": null,
      "id": 4,
      "materials": [],
      "techniques": "Islamic Art"
    },
    {
      "image": "assets/tapestry2.jpg",
      "displayDate": null,
      "productionCulturalGroup": null,
      "site": null,
      "recordType": null,
      "objectName": null,
      "slug": "bowl",
      "objectNumber": null,
      "title": "Bowl",
      "location": null,
      "styles": null,
      "artist": null,
      "museum": null,
      "sort": null,
      "id": 5,
      "materials": [],
      "techniques": "Tapestry"
    },
    {
      "image": "assets/glass2.jpg",
      "displayDate": null,
      "productionCulturalGroup": null,
      "site": null,
      "recordType": null,
      "objectName": null,
      "slug": "ayuba-suleiman-diallo-job-ben-solomon",
      "objectNumber": null,
      "title": "Ayuba Suleiman Diallo, Job ben Solomon",
      "location": null,
      "styles": null,
      "artist": null,
      "museum": null,
      "sort": null,
      "id": 7,
      "materials": [],
      "techniques": "Glass"
    },
    {
      "image": "assets/pottery1.jpg",
      "displayDate": null,
      "productionCulturalGroup": null,
      "site": null,
      "recordType": null,
      "objectName": null,
      "slug": "portrait-of-mrs-easter-menasha",
      "objectNumber": null,
      "title": "Portrait of Mrs. Easter Menasha",
      "location": null,
      "styles": null,
      "artist": null,
      "museum": null,
      "sort": null,
      "id": 8,
      "materials": [],
      "techniques": "Pottery"
    },
    {
      "image": "assets/unsplash-1.jpg",
      "displayDate": null,
      "productionCulturalGroup": null,
      "site": null,
      "recordType": null,
      "objectName": null,
      "slug": "space",
      "objectNumber": null,
      "title": "Space",
      "location": null,
      "styles": null,
      "artist": null,
      "museum": null,
      "sort": null,
      "id": 27,
      "materials": [],
      "techniques": "Pottery"
    },
    {
      "image": "assets/unsplash-2.jpg",
      "displayDate": null,
      "productionCulturalGroup": null,
      "site": null,
      "recordType": null,
      "objectName": null,
      "slug": "art",
      "objectNumber": null,
      "title": "Art",
      "location": null,
      "styles": null,
      "artist": null,
      "museum": null,
      "sort": null,
      "id": 28,
      "materials": [],
      "techniques": "Islamic Art"
    },
    {
      "image": "assets/unsplash-3.jpg",
      "displayDate": null,
      "productionCulturalGroup": null,
      "site": null,
      "recordType": null,
      "objectName": null,
      "slug": "marie-bonaparte-s-tiara",
      "objectNumber": null,
      "title": "Marie Bonaparte’s Tiara",
      "location": null,
      "styles": null,
      "artist": null,
      "museum": null,
      "sort": null,
      "id": 1,
      "materials": [],
      "techniques": "Tapestry"
    },
    {
      "image": "assets/unsplash-4.jpg",
      "displayDate": null,
      "productionCulturalGroup": null,
      "site": null,
      "recordType": null,
      "objectName": null,
      "slug": "sample-of-iraqi-soil-excavation-5-layers-of-death",
      "objectNumber": null,
      "title": "Sample of Iraqi Soil Excavation = 5 Layers of Death",
      "location": null,
      "styles": null,
      "artist": null,
      "museum": null,
      "sort": null,
      "id": 2,
      "materials": [],
      "techniques": "Glass"
    },
    {
      "image": "assets/unsplash-5.jpg",
      "displayDate": null,
      "productionCulturalGroup": null,
      "site": null,
      "recordType": null,
      "objectName": null,
      "slug": "architectural-wall-decoration",
      "objectNumber": null,
      "title": "Architectural Wall Decoration",
      "location": null,
      "styles": null,
      "artist": null,
      "museum": null,
      "sort": null,
      "id": 3,
      "materials": [],
      "techniques": "Pottery"
    },
    {
      "image": "assets/unsplash-6.jpg",
      "displayDate": null,
      "productionCulturalGroup": null,
      "site": null,
      "recordType": null,
      "objectName": null,
      "slug": "composition",
      "objectNumber": null,
      "title": "Composition",
      "location": null,
      "styles": null,
      "artist": null,
      "museum": null,
      "sort": null,
      "id": 4,
      "materials": [],
      "techniques": "Islamic Art"
    },
    {
      "image": "assets/unsplash-7.jpg",
      "displayDate": null,
      "productionCulturalGroup": null,
      "site": null,
      "recordType": null,
      "objectName": null,
      "slug": "bowl",
      "objectNumber": null,
      "title": "Bowl",
      "location": null,
      "styles": null,
      "artist": null,
      "museum": null,
      "sort": null,
      "id": 5,
      "materials": [],
      "techniques": "Tapestry"
    },
    {
      "image": "assets/unsplash-8.jpg",
      "displayDate": null,
      "productionCulturalGroup": null,
      "site": null,
      "recordType": null,
      "objectName": null,
      "slug": "ayuba-suleiman-diallo-job-ben-solomon",
      "objectNumber": null,
      "title": "Ayuba Suleiman Diallo, Job ben Solomon",
      "location": null,
      "styles": null,
      "artist": null,
      "museum": null,
      "sort": null,
      "id": 7,
      "materials": [],
      "techniques": "Glass"
    },
    {
      "image": "assets/unsplash-9.jpg",
      "displayDate": null,
      "productionCulturalGroup": null,
      "site": null,
      "recordType": null,
      "objectName": null,
      "slug": "portrait-of-mrs-easter-menasha",
      "objectNumber": null,
      "title": "Portrait of Mrs. Easter Menasha",
      "location": null,
      "styles": null,
      "artist": null,
      "museum": null,
      "sort": null,
      "id": 8,
      "materials": [],
      "techniques": "Pottery"
    },
    {
      "image": "assets/unsplash-1.jpg",
      "displayDate": null,
      "productionCulturalGroup": null,
      "site": null,
      "recordType": null,
      "objectName": null,
      "slug": "space",
      "objectNumber": null,
      "title": "Space",
      "location": null,
      "styles": null,
      "artist": null,
      "museum": null,
      "sort": null,
      "id": 27,
      "materials": [],
      "techniques": "Pottery"
    },
    {
      "image": "assets/unsplash-2.jpg",
      "displayDate": null,
      "productionCulturalGroup": null,
      "site": null,
      "recordType": null,
      "objectName": null,
      "slug": "art",
      "objectNumber": null,
      "title": "Art",
      "location": null,
      "styles": null,
      "artist": null,
      "museum": null,
      "sort": null,
      "id": 28,
      "materials": [],
      "techniques": "Islamic Art"
    },
    {
      "image": "assets/unsplash-3.jpg",
      "displayDate": null,
      "productionCulturalGroup": null,
      "site": null,
      "recordType": null,
      "objectName": null,
      "slug": "marie-bonaparte-s-tiara",
      "objectNumber": null,
      "title": "Marie Bonaparte’s Tiara",
      "location": null,
      "styles": null,
      "artist": null,
      "museum": null,
      "sort": null,
      "id": 1,
      "materials": [],
      "techniques": "Tapestry"
    },
    {
      "image": "assets/unsplash-4.jpg",
      "displayDate": null,
      "productionCulturalGroup": null,
      "site": null,
      "recordType": null,
      "objectName": null,
      "slug": "sample-of-iraqi-soil-excavation-5-layers-of-death",
      "objectNumber": null,
      "title": "Sample of Iraqi Soil Excavation = 5 Layers of Death",
      "location": null,
      "styles": null,
      "artist": null,
      "museum": null,
      "sort": null,
      "id": 2,
      "materials": [],
      "techniques": "Glass"
    },
    {
      "image": "assets/unsplash-5.jpg",
      "displayDate": null,
      "productionCulturalGroup": null,
      "site": null,
      "recordType": null,
      "objectName": null,
      "slug": "architectural-wall-decoration",
      "objectNumber": null,
      "title": "Architectural Wall Decoration",
      "location": null,
      "styles": null,
      "artist": null,
      "museum": null,
      "sort": null,
      "id": 3,
      "materials": [],
      "techniques": "Pottery"
    },
    {
      "image": "assets/unsplash-6.jpg",
      "displayDate": null,
      "productionCulturalGroup": null,
      "site": null,
      "recordType": null,
      "objectName": null,
      "slug": "composition",
      "objectNumber": null,
      "title": "Composition",
      "location": null,
      "styles": null,
      "artist": null,
      "museum": null,
      "sort": null,
      "id": 4,
      "materials": [],
      "techniques": "Islamic Art"
    },
    {
      "image": "assets/unsplash-7.jpg",
      "displayDate": null,
      "productionCulturalGroup": null,
      "site": null,
      "recordType": null,
      "objectName": null,
      "slug": "bowl",
      "objectNumber": null,
      "title": "Bowl",
      "location": null,
      "styles": null,
      "artist": null,
      "museum": null,
      "sort": null,
      "id": 5,
      "materials": [],
      "techniques": "Tapestry"
    },
    {
      "image": "assets/unsplash-8.jpg",
      "displayDate": null,
      "productionCulturalGroup": null,
      "site": null,
      "recordType": null,
      "objectName": null,
      "slug": "ayuba-suleiman-diallo-job-ben-solomon",
      "objectNumber": null,
      "title": "Ayuba Suleiman Diallo, Job ben Solomon",
      "location": null,
      "styles": null,
      "artist": null,
      "museum": null,
      "sort": null,
      "id": 7,
      "materials": [],
      "techniques": "Glass"
    },
    {
      "image": "assets/unsplash-9.jpg",
      "displayDate": null,
      "productionCulturalGroup": null,
      "site": null,
      "recordType": null,
      "objectName": null,
      "slug": "portrait-of-mrs-easter-menasha",
      "objectNumber": null,
      "title": "Portrait of Mrs. Easter Menasha",
      "location": null,
      "styles": null,
      "artist": null,
      "museum": null,
      "sort": null,
      "id": 8,
      "materials": [],
      "techniques": "Pottery"
    }
  ]
}

// Get the buttons used to navigate back and forth.
let buttonNext = document.querySelector(".button-next");
let buttonPrevious = document.querySelector(".button-previous");

// Get the ul element that holds all the images.
let gallery = document.querySelector('.gallery-slideshow');

// Get the filter buttons.
let filterAll = document.querySelector('#filter-all');
let filterGlass = document.querySelector('#filter-glass');
let filterIslamic = document.querySelector('#filter-islamic');
let filterPottery = document.querySelector('#filter-pottery');
let filterTapestry = document.querySelector('#filter-tapestry');
let allFilters = document.querySelectorAll('.button.filter');

// Generate a shuffled list of techniques.
let techniques = generateList();

// Make an empty object.
let techniqueLists = {};

// Define slides.
let slidePrevious = document.querySelector('.previous-item');
let slideCurrent = document.querySelector('.current-item');
let slideNext = document.querySelector('.next-item');

// For each object in artObjectsList, add an array for that category to the techniquesList, then add the image to the corresponding category.
artObjectsList.data.forEach(artObject => {
  const technique = artObject.techniques;
  if (!techniqueLists[technique]) {
    techniqueLists[technique] = [];
  }
  techniqueLists[technique].push(artObject);
});

// The 'next' button is clicked.
buttonNext.addEventListener("click", function () {
  // The previous slide becomes hidden.
  slidePrevious.classList.remove("previous-item");

  // The current slide becomes the previous slide.
  slidePrevious = slideCurrent;
  slidePrevious.classList.remove('current-item');
  slidePrevious.classList.add('previous-item');

  // The next sibling (or the first element) becomes the current slide.
  if (slideCurrent.nextElementSibling) {
    slideCurrent = slideCurrent.nextElementSibling;
  } else {
    slideCurrent = gallery.firstElementChild;
  }

  slideCurrent.classList.remove('next-item');
  slideCurrent.classList.add('current-item');

  if (slideCurrent.nextElementSibling) { 
    slideCurrent.nextElementSibling.classList.add('next-item');
  } else {
    gallery.firstElementChild.classList.add('next-item');
  }
})

// The 'previous' button is clicked.
buttonPrevious.addEventListener("click", function () {
  // The next slide becomes hidden.
  slideNext.classList.remove('next-item');

  // The current slide becomes the next slide.
  slideNext = slideCurrent;
  slideNext.classList.remove('current-item');
  slideNext.classList.add('next-item');

  // The previous sibling (or the last element) becomes the current slide.
  if (slideCurrent.previousElementSibling) {
    slideCurrent = slideCurrent.previousElementSibling;
  } else {
    slideCurrent = gallery.lastElementChild;
  }

  slideCurrent.classList.remove('previous-item');
  slideCurrent.classList.add('current-item');

  if (slideCurrent.previousElementSibling) { 
    slideCurrent.previousElementSibling.classList.add('previous-item');
  } else {
    gallery.lastElementChild.classList.add('previous-item');
  }
})

filterGlass.addEventListener('click', () => { loadImages('Glass'); setActive(filterGlass); });
filterIslamic.addEventListener('click', () => { loadImages('Islamic Art'); setActive(filterIslamic); });
filterPottery.addEventListener('click', () => { loadImages('Pottery'); setActive(filterPottery); });
filterTapestry.addEventListener('click', () => { loadImages('Tapestry'); setActive(filterTapestry); });

function setActive(type) {
  allFilters.forEach((filter) => {
    if (filter.classList.contains('active-filter')) {
      filter.classList.remove('active-filter');
    }
  })
  type.classList.add('active-filter');
}

function generateList() {
  let list = [];
  artObjectsList.data.forEach(element => { if (!list.includes(element.techniques)) { list.push(element.techniques) } });
  return list.sort((a, b) => 0.5 - Math.random());
}

function generateImage(link, source, altText, category) {
  // Create an image with a caption inside of a figure element that is nested inside an anchor tag, which itself is nested in a list item.
  let listItem = document.createElement('li');
  let anchor = document.createElement('a');
  let figure = document.createElement('figure');
  let caption = document.createElement('figcaption');
  let image = document.createElement('img');

  // Set attributes of the anchor tag.
  anchor.setAttribute('href', link);
  anchor.setAttribute('aria-label', "details");

  // Set attributes of the image.
  image.setAttribute('width', '250');
  image.setAttribute('class', 'slide-img');
  image.setAttribute('src', source);
  image.setAttribute('alt', altText);
  image.setAttribute('data-category', category);

  // Give the list item the 'slide' class.
  listItem.setAttribute('class', 'slide');

  // Assembly.
  figure.appendChild(image);
  figure.appendChild(caption);
  anchor.appendChild(figure);
  listItem.appendChild(anchor);
  return listItem;
}

function loadImages(category) {
  // Clear the gallery.
  removeAllChildren(gallery);

  // Load all images in the corresponding category list.
  items = techniqueLists[category];
  items.forEach(element => {
    let item = generateImage('#', element.image, element.title, element.techniques);
    gallery.appendChild(item);
  });

  // Generate a number between 0 and the amount of pictures in the gallery.
  random = Math.floor(Math.random() * gallery.childNodes.length)

  // If random was 0, make the previous slide the last image in the gallery.
  slidePrevious = (random === 0) ? gallery.lastChild : gallery.childNodes[random - 1]
  slidePrevious.classList.add('previous-item');

  // Set the current slide to the one chosen randomly.
  slideCurrent = gallery.childNodes[random];
  slideCurrent.classList.add('current-item');

  // if random was equal to the amount of pictures, make the next slide the first image in the gallery.
  slideNext = (random === (gallery.childNodes.length - 1)) ? gallery.firstChild : gallery.childNodes[random + 1];
  slideNext.classList.add('next-item');
}

// Function to remove all child elements
function removeAllChildren(element) {
  while (element.firstChild) {
    element.removeChild(element.firstChild);
  }
}
